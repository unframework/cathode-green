
body {
    background: #e0f0ff;
}

#box2dDebugDraw {
    position: absolute;
    top: 10px;
    left: 10px;
}

.stageWindow {
    position: absolute;
    top: 10px;
    left: 10px;

    border: 1px solid #000;

    width: 640px;
    height: 480px;

    background: #fee;

    -webkit-transform: translate3d(0, 0, 0);
    -webkit-perspective: 1200;

    overflow: hidden;
}

.stage {
    position: absolute;
    top: 0;
    left: 0;

    transition: -webkit-transform 5.5s;

    -webkit-transform: rotateX(-0.2rad) translate3d(320px, 0, -400px) scale(0.8);
    //-webkit-transform-origin: 320px 480px;
    -webkit-transform-style: preserve-3d;

    &:before {
        position: absolute;
        display: inline-block;
        content: '';

        width: 320px;
        height: 320px;

        background: #eee;
        border-radius: 160px;
        -webkit-transform-origin: 0 0;
        -webkit-transform: rotateY(90deg) translate3d(-160px,-160px,0);
    }

    &:after {
        display: inline-block;
        content: '';

        width: 320px;
        height: 320px;

        background: #ddd;
        border-radius: 160px;
        -webkit-transform-origin: 0 0;
        -webkit-transform: rotateX(90deg) translate3d(-160px,-160px,0);
    }
}

.stageWindow:hover .stage {
    -webkit-transform: rotateX(1.2rad) translate3d(320px, 0, -400px) scale(0.8);
}

.wall {
    position: absolute;
    top: 0;
    left: 0;

    width: 100px;
    height: 100px;

    -webkit-transform: translate3d(10px, 10px, 0px);
    transition: -webkit-transform 0.5s;

    &:hover {
        -webkit-transform: translate3d(10px, 10px, 10px);
    }

    &:after {
        display: inline-block;
        font-family: 'Press Start 2P', mono;
        font-size: 16px;
        line-height: 1;
        color: #fee;
        content: '+----+\A|    |\A|    |\A|    |\A|    |\A+----+';
        white-space: pre;
        background: #f00;
    }
}

.charSprite(@w, @char, @fg, @bg) {
    position: absolute;
    top: 0;
    left: 0;

    ._body {
        position: absolute;
        top: 0;
        left: 0;

        width: @w;
        height: @w;
        border-radius: @w*0.5;
        background: @bg;

        -webkit-transform: translate3d(-@w*0.5, -@w*0.5, 0px);

        &:after {
            position: relative;
            left: @w*0.0625;
            top: @w*0.0625;
            font-family: 'Press Start 2P', mono;
            font-size: @w;
            line-height: 1;
            color: @fg;
            content: @char;
            white-space: pre;
        }
    }
}

.bikeWheel {
    .charSprite(16px, '@', #afa, #284);
}

.bikeBody {
    .charSprite(16px, '-', #284, none);
}

.terrainBlock {
    position: absolute;
    top: 0;
    left: 0;
    -webkit-transform-origin: 0 0;

    ._body {
        position: absolute;
        top: 0;
        left: 0;

        width: 100%;
        height: 100%;
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAeCAIAAACE3ijUAAAAPklEQVQYldXNoRKAMAxEwY0KLiL//4kIHKpFMPUdHPbe7FxkF+7zguyaTLIrJji6WNvbY9OMZca++fLzf/MAADBC1QFwjGcAAAAASUVORK5CYII=);

        -webkit-transform: translate3d(-50%, -50%, 0px);
    }
}
